// PrevOutput:  56f87210814c8baef7068454e517a70da2f2103fc3ac7f687e32a228dc80e115 1
// Locked for address: bcrt1qr47dd36u96r0fjle36hdygdnp0v6pwfgzsrl3p
// Vin amount: 1.00000000
// Vout amount: 0.9998848
// PrivKey: cNUnpYpMsJXYCERYBciJnsWBpcYEFjdcbq6dxj4SskGhs7uHuJ7Q
// To address: miCsSagJ7RQDCMcBUaKFKEryaLnxbhGAPt

const bitcoin = require('bitcoinjs-lib')
const { buildTx } = require('../../src/tx-builder')

const privKey = 'cNUnpYpMsJXYCERYBciJnsWBpcYEFjdcbq6dxj4SskGhs7uHuJ7Q'
const keyPair = bitcoin.ECPair.fromWIF(privKey, bitcoin.networks.testnet)
const sequence = 4294967295
const outputValue = 99988480
const toAddress = 'miCsSagJ7RQDCMcBUaKFKEryaLnxbhGAPt'

const txConfig = {
  version: 1,
  locktime: 0,  // 4 bytes
  vin: [{
    txid: '56f87210814c8baef7068454e517a70da2f2103fc3ac7f687e32a228dc80e115',
    vout: 1,
    keyPair,
    type: 'P2WPKH',
    script: '',
    sequence: sequence
  }],
  vout: [{
    value: outputValue,
    address: toAddress
  }]
}
const buffer2a = buildTx(txConfig, {sha: 'SHA256'})
const hex = buffer2a.toString('hex')
console.log('\n\ntx.toHex =  ', hex)

// Hex:
// 0100000000010115e180dc28a2327e687facc33f10f2a20da717e5548406f7ae8b4c811072f8560100000000ffffffff0100b4f505000000001976a9141d7cd6c75c2e86f4cbf98eaed221b30bd9a0b92888ac016b483045022100a364c9a7f37aad34a294807860e4fc013338895035afe9dbdbd915157944390302207414b5ba415f6f5bbde8a277cdf18290525a619d87078535e62387fa5cc3d6780121038262a6c6cec93c2d3ecd6c6072efea86d02ff8e3328bbd0242b20af3425990ac00000000

// "txid": "d869f854e1f8788bcff294cc83b280942a8c728de71eb709a2c29d10bfe21b7c",
// "hash": "626ffd4714d329659d66b9efa9d5714f91477c54dd13d17ed1d68841c886d382",
// "hash": "c4c13a7b119b977125e713a9f64297a683c08765195c65be9dfadacbfe86d527",

//
// 01000000
// 00
// 01
// 01
// 15e180dc28a2327e687facc33f10f2a20da717e5548406f7ae8b4c811072f856
// 01000000
// 00
// ffffffff
// 01
// 00b4f50500000000
// 19
// 76a9141d7cd6c75c2e86f4cbf98eaed221b30bd9a0b92888ac
// 01
// 6b
// 48
// 3045022100df7b7e5cda14ddf91290e02ea10786e03eb11ee36ec02dd862fe9a326bbcb7fd02203f5b4496b667e6e281cc654a2da9e4f08660c620a1051337fa8965f727eb191901
// 21
// 038262a6c6cec93c2d3ecd6c6072efea86d02ff8e3328bbd0242b20af3425990ac
// 00000000
